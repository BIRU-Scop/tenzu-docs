---
sidebar_position: 2
hide_table_of_contents: true
---

# Configuration

We try to make Tenzu easily configurable for your own use-case.

## Configure Tenzu Backend

The backend is fully configurable using environment variables.

import styles from '/src/css/configuration.module.css';

| Name                                                    | Type                                                                                      | Description                                                                                                                                                                                                      | Required | Default                                               |
|:--------------------------------------------------------|:------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------|:------------------------------------------------------|
| `TENZU_BACKEND_URL`                                     | String                                                                                    | URL of the backend of Tenzu used to build some links                                                                                                                                                             | Yes      | `"http://localhost:8000"`                             |
| `TENZU_FRONTEND_URL`                                    | String                                                                                    | URL of the frontend of Tenzu used to build some links                                                                                                                                                            | Yes      | `"http://localhost:4200"`                             |
| `TENZU_DB__NAME`                                        | String                                                                                    | Database name                                                                                                                                                                                                    | Yes      |                                                       |
| `TENZU_DB__USER`                                        | String                                                                                    | Database username                                                                                                                                                                                                | Yes      |                                                       |
| `TENZU_DB__PASSWORD`                                    | String                                                                                    | Database password                                                                                                                                                                                                | Yes      |                                                       |
| `TENZU_DB__HOST`                                        | String                                                                                    | Database host                                                                                                                                                                                                    | Yes      |                                                       |
| `TENZU_SECRET_KEY`                                      | String                                                                                    | The [secret key](https://docs.djangoproject.com/en/5.1/ref/settings/#secret-key) of the django app                                                                                                               | Yes      |                                                       |
| `TENZU_TOKENS__SIGNING_KEY`                             | String                                                                                    | The [signing key](https://eadwincode.github.io/django-ninja-jwt/settings/) for the JWT tokens (used for authentication and invitations)                                                                          | Yes      |                                                       |
| `TENZU_TOKENS__ALGORITHM`                               | String                                                                                    | The algorithm to use for JWT signature                                                                                                                                                                           | No       | `"HS512"`                                             |
| `TENZU_TOKENS__VERIFYING_KEY`                           | String                                                                                    | The RSA public key used if an RSA algorithm was chosen                                                                                                                                                           | No       | `""`                                                  |
| `TENZU_TOKENS__ACCESS_TOKEN_LIFETIME`                   | Timedelta                                                                                 | Validity of the access token used for authentication                                                                                                                                                             | No       | 5 minutes                                             |
| `TENZU_TOKENS__REFRESH_TOKEN_LIFETIME`                  | Timedelta                                                                                 | Validity of the refresh token used for authentication                                                                                                                                                            | No       | 4 hours                                               |
| `TENZU_DEBUG`                                           | Boolean                                                                                   | Whether to activate Django's debug mode, never use it in production                                                                                                                                              | No       | `False`                                               |
| `TENZU_STATIC_URL`                                      | String                                                                                    | URL the static files will be served from                                                                                                                                                                         | No       | `"/static/"`                                          |
| `TENZU_MEDIA_URL`                                       | String                                                                                    | URL the media files will be served from                                                                                                                                                                          | No       | `"/media/"`                                           |
| `EXTRA_CORS`                                            | Array                                                                                     | Extra URLs to allow CORS requests from                                                                                                                                                                           | No       | `[]`                                                  |
| `TENZU_REQUIRED_TERMS`                                  | Boolean                                                                                   | Whether users will be required to accept terms of services and a privacy policy in order to use Tenzu                                                                                                            | No       | `False`                                               |
| `TENZU_SUPPORT_EMAIL`                                   | String                                                                                    | Email to contact support for your instance, that will be included in emails sent to users                                                                                                                        | No       | `"support@example.com"`                               |
| `TENZU_EMAIL__EMAIL_BACKEND`                            | String                                                                                    | The [backend system used to send email](https://docs.djangoproject.com/en/5.1/topics/email/)                                                                                                                     | No       | `"django.core.mail.backends.filebased.EmailBackend"`  |
| `TENZU_EMAIL__EMAIL_FILE_PATH`                          | String                                                                                    | Directory where the emails will be stored for file-based backend                                                                                                                                                 | No       | `"<django_app_root_folder>/file_emails"`              |
| `TENZU_EMAIL__DEFAULT_FROM_EMAIL`                       | String                                                                                    | Default "from" email address                                                                                                                                                                                     | No       | `"username@domain.name"`                              |
| `TENZU_EMAIL__EMAIL_HOST`                               | String                                                                                    | Host of your email SMTP server                                                                                                                                                                                   | No       | `"localhost"`                                         |
| `TENZU_EMAIL__EMAIL_PORT`                               | Number                                                                                    | Port of your email SMTP server                                                                                                                                                                                   | No       | `25`                                                  |
| `TENZU_EMAIL__EMAIL_HOST_USER`                          | String                                                                                    | Username of the SMTP server                                                                                                                                                                                      | No       | `""`                                                  |
| `TENZU_EMAIL__EMAIL_HOST_PASSWORD`                      | String                                                                                    | Password of the SMTP server                                                                                                                                                                                      | No       | `""`                                                  |
| `TENZU_EMAIL__EMAIL_USE_TLS`                            | Boolean                                                                                   | Whether to use explicit TLS connection with the SMTP server, mutually exclusive with `TENZU_EMAIL__EMAIL_USE_SSL`                                                                                                | No       | `False`                                               |
| `TENZU_EMAIL__EMAIL_USE_SSL`                            | Boolean                                                                                   | Whether to use implicit TLS connection with the SMTP server, mutually exclusive with `TENZU_EMAIL__EMAIL_USE_TLS`                                                                                                | No       | `False`                                               |
| `TENZU_EMAIL__EMAIL_SSL_CERTFILE`                       | String                                                                                    | Path to a PEM-formatted certificate chain file for client authentication to the SMTP server, use with `TENZU_EMAIL__EMAIL_SSL_KEYFILE`                                                                           | No       | `None`                                                |
| `TENZU_EMAIL__EMAIL_SSL_KEYFILE`                        | String                                                                                    | Path to a PEM-formatted private key file for client authentication to the SMTP server                                                                                                                            | No       | `None`                                                |
| `TENZU_EMAIL__EMAIL_TIMEOUT`                            | Number                                                                                    | Timeout in seconds for blocking operations like the connection attempt                                                                                                                                           | No       | `None`                                                |
| `TENZU_EMAIL__EMAIL_USE_LOCALTIME`                      | Boolean                                                                                   | Use local time zone for the SMTP Date header instead of UTC                                                                                                                                                      | No       | `False`                                               |
| `TENZU_EVENTS__PUBSUB_BACKEND`                          | `"channels.layers.InMemoryChannelLayer", "channels_redis.pubsub.RedisPubSubChannelLayer"` | Whether to use redis or memory as backend for websockets. *DO NOT* use in-memory backend in production.                                                                                                          | No       | `"channels_redis.pubsub.RedisPubSubChannelLayer"`     |
| `TENZU_EVENTS__REDIS_HOST`                              | String                                                                                    | Redis host that will be used for websockets if Redis backend is chosen                                                                                                                                           | No       | `"tenzu-redis"`                                       |
| `TENZU_EVENTS__REDIS_PORT`                              | Number                                                                                    | Redis port                                                                                                                                                                                                       | No       | `6379`                                                |
| `TENZU_EVENTS__REDIS_USERNAME`                          | String                                                                                    | Redis username                                                                                                                                                                                                   | No       | `""`                                                  |
| `TENZU_EVENTS__REDIS_PASSWORD`                          | String                                                                                    | Redis password                                                                                                                                                                                                   | No       | `""`                                                  |
| `TENZU_EVENTS__REDIS_DATABASE`                          | Number                                                                                    | Redis database                                                                                                                                                                                                   | No       | `0`                                                   |
| `TENZU_EVENTS__REDIS_OPTIONS`                           | Object                                                                                    | Additional options that will be passed to the [redis client](https://redis.readthedocs.io/en/stable/connections.html)                                                                                            | No       | `{}`                                                  |
| `TENZU_EVENTS__REDIS_CHANNEL_OPTIONS`                   | Object                                                                                    | Additional options that will be passed to the [redis channel configuration](https://github.com/django/channels_redis/)                                                                                           | No       | `{}`                                                  |
| `TENZU_USER_EMAIL_ALLOWED_DOMAINS`                      | Array                                                                                     | If filled, will restrict the users allowed to have an account to only the specified domains                                                                                                                      | No       | `[]`                                                  |
| `TENZU_VERIFY_USER_TOKEN_LIFETIME`                      | Timedelta                                                                                 | Validity of the token used to verify a new user                                                                                                                                                                  | No       | 4 days                                                |
| `TENZU_RESET_PASSWORD_TOKEN_LIFETIME`                   | Timedelta                                                                                 | Validity of the token used to reset a password                                                                                                                                                                   | No       | 2 hours                                               |
| `TENZU_GENERAL_INVITATION_LIFETIME`                     | Timedelta                                                                                 | Validity of the token used to invite an user (new or existing) to a project or workspace                                                                                                                         | No       | 4 days                                                |
| `TENZU_INVITATION_RESEND_LIMIT`                         | Number                                                                                    | Maximum number of email that can be sent for the same invitation                                                                                                                                                 | No       | `10`                                                  |
| `TENZU_INVITATION_RESEND_TIME`                          | Number                                                                                    | Number of minutes before a new invitation email can be sent                                                                                                                                                      | No       | `10`                                                  |
| `TENZU_MAX_NUM_WORKFLOWS`                               | Number                                                                                    | Maximum number of kanban that can be created in any one project                                                                                                                                                  | No       | `8`                                                   |
| `TENZU_IMAGES__VALID_CONTENT_TYPES`                     | Array                                                                                     | Allowed content type for uploaded images                                                                                                                                                                         | No       | `["image/jpeg","image/png","image/gif","image/webp"]` |
| `TENZU_STORAGE__DAYS_TO_STORE_DELETED_STORAGED_OBJECTS` | Number                                                                                    | Number of days the file of deleted object will be kept for before being deleted                                                                                                                                  | No       | `90`                                                  |
| `SENTRY_DSN`                                            | String                                                                                    | If you are using [Sentry](https://docs.sentry.io/concepts/key-terms/dsn-explainer/) or [Glitchtip](https://glitchtip.com/documentation/error-tracking) to track error, set this to the DSN value of your project | No       |                                                       |
| `SENTRY_ENVIRONMENT`                                    | String                                                                                    | If you set `SENTRY_DSN`, define this to choose the [environment](https://docs.sentry.io/platforms/python/configuration/environments/) errors will be tagged under, you can set this to whatever you want         | No       | `"production"` (Sentry's default)                     |
| `TENZU_STORAGE__BACKEND_CLASS`                          | `"django.core.files.storage.FileSystemStorage", "storages.backends.s3.S3Storage"`         | Use `storages.backends.s3.S3Storage` to activate the s3 storage                                                                                                                                                  | No       | `django.core.files.storage.FileSystemStorage`         |
| `TENZU_STORAGE__AWS_STORAGE_BUCKET_NAME`                | String                                                                                    | Name of the s3 bucket if S3Storage is used                                                                                                                                                                       | No       |                                                       |
| `TENZU_STORAGE__AWS_S3_SECRET_ACCESS_KEY`               | String                                                                                    | The s3 access key if S3Storage is used                                                                                                                                                                           | No       |                                                       |
| `TENZU_STORAGE__AWS_ACCESS_KEY_ID`                      | String                                                                                    | The s3 access key id (or username)  if S3Storage is used                                                                                                                                                         | No       |                                                       |
| `TENZU_STORAGE__AWS_S3_ENDPOINT_URL`                    | String                                                                                    | The s3 url if S3Storage is used; Must be scheme + url + port if it's not a standard port for the scheme, ex: https://s3.url:9000"                                                                                | No       |                                                       |
| `TENZU_MAX_UPLOAD_FILE_SIZE`                            | Number, Null                                                                              | Maximum size, in bytes, for uploaded files. Set to "null" for no limit.                                                                                                                                          | No       | `104857600` (= 100Mb)                                 |

:::tip
Please note that emails are by default stored in files. It's recommended to set `TENZU_EMAIL__EMAIL_BACKEND` to
`django.core.mail.backends.smtp.EmailBackend` in order to use a real SMTP server.
:::

For an exhaustive and up-to-date list of variables, you can directly check
the [config file definition](https://github.com/BIRU-Scop/tenzu-back/blob/main/src/configurations/conf/__init__.py).

Here's the minimum values that we set for our quickstart example:

import CodeBlock from '@theme/CodeBlock';
import BackConfigComponentSource from '!!raw-loader!../examples/quickstart/tenzu.env';

<CodeBlock language="bash" title="examples/quickstart/tenzu.env">{BackConfigComponentSource}</CodeBlock>

### Files location

Here is the location where public files will be stored:

- [media files](https://docs.djangoproject.com/en/5.1/topics/files/): (uploaded by users): `/public/media`

`<django_app_root_folder>` will be `/tenzu` in the docker image that we provide.

## Configure Tenzu Frontend

The configuration must be set in a file mounted at this location of the frontend image:
`/usr/share/caddy/assets/configs/config.json`.

It is a JSON object expecting the following:

| Name                 | Type                                  | Description                                                                                                                                                                                                      | Required | Default               |
|----------------------|---------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|-----------------------|
| `api.baseDomain`     | String                                | The url  domain of the backend                                                                                                                                                                                   | Yes      |                       |
| `api.scheme`         | `"http","https"`                      | The scheme of the backend                                                                                                                                                                                        | Yes      |                       |
| `api.suffixDomain`   | `"api"`                               | Root url path for the backend's webservices                                                                                                                                                                      | Yes      |                       |
| `api.prefix`         | `"v1"`                                | Version of the backend API used in url path                                                                                                                                                                      | Yes      |                       |
| `wsUrl`              | String                                | The URL of the websocket                                                                                                                                                                                         | Yes      |                       |
| `env`                | `"dev","demo","staging","production"` | The type of environment this image will run in                                                                                                                                                                   | No       | `"production"`        |
| `maxUploadFileSize`  | Number, Null                          | Maximum size, in bytes, for uploaded files. Set to `null` for no limit. Should be less than or equal to corresponding `TENZU_MAX_UPLOAD_FILE_SIZE` backend config                                                | No       | `104857600` (= 100Mb) |
| `legal`              | Null, Object                          | Can be set to null, otherwise all subdfields are required                                                                                                                                                        | No       | `null`                |
| `legal.tos`          | String                                | Url to access the terms of service you want your users to accept                                                                                                                                                 | Yes      |                       |
| `legal.privacy`      | String                                | Url to access the privacy policy you want your users to accept                                                                                                                                                   | Yes      |                       |
| `sentry.dsn`         | String                                | If you are using [Sentry](https://docs.sentry.io/concepts/key-terms/dsn-explainer/) or [Glitchtip](https://glitchtip.com/documentation/error-tracking) to track error, set this to the DSN value of your project | No       |                       |
| `sentry.environment` | String                                | If you set `sentry.dsn`, define this to choose the environment errors will be tagged under, you can set this to whatever you want                                                                                | No       |                       |

In the quickstart example, you can modify it in the `config-front.json` file.

Here's the minimum values that we've set for our quickstart example:

import FrontConfigComponentSource from '!!raw-loader!../examples/quickstart/config-front.json';

<CodeBlock language="bash" title="examples/quickstart/config-front.json">{FrontConfigComponentSource}</CodeBlock>
